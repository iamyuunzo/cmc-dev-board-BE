# ERD 설계 (Step 2)

## 1. 설계 목적
게시판 서비스의 핵심 도메인(사용자, 게시글, 댓글, 북마크, 카테고리) 간
데이터 구조와 연관관계를 명확히 정의하기 위해 ERD를 설계한다.

---

## 2. 엔티티 설명

### User
- 게시글, 댓글, 북마크의 주체가 되는 사용자 엔티티이다.
- 하나의 사용자는 여러 게시글과 댓글을 작성할 수 있다.

### Post
- 게시판의 핵심 엔티티로 게시글 정보를 저장한다.
- 하나의 게시글은 하나의 사용자에 의해 작성된다.

### Comment
- 게시글에 종속되는 댓글 엔티티이다.
- parent_comment_id를 통해 대댓글 구조를 표현한다.

### Bookmark
- 사용자와 게시글 간의 북마크 관계를 표현하는 엔티티이다.
- 중복 북마크를 방지하기 위해 사용자와 게시글 조합에 유니크 제약을 둔다.

### Category
- 게시글을 분류하기 위한 카테고리 엔티티이다.

### PostCategory
- 게시글과 카테고리 간 N:M 관계를 표현하기 위한 중간 테이블이다.

---

## 3. 연관관계(Cardinality) 설명

- User : Post = 1:N  
  → 한 명의 사용자는 여러 게시글을 작성할 수 있다.

- Post : Comment = 1:N  
  → 하나의 게시글에는 여러 개의 댓글이 작성될 수 있다.

- Comment : Comment = 1:N (Self Reference)  
  → 댓글은 다른 댓글을 부모로 가질 수 있어 대댓글 구조를 표현한다.

- User : Post = N:M (Bookmark)  
  → 사용자는 여러 게시글을 북마크할 수 있고,
  하나의 게시글은 여러 사용자에 의해 북마크될 수 있다.

- Post : Category = N:M  
  → 하나의 게시글은 여러 카테고리에 속할 수 있고,
  하나의 카테고리는 여러 게시글을 가질 수 있다.

---

## 4. 설계 의사결정

- 댓글의 대댓글 구조는 자기 참조 관계를 통해 표현하였다.
- 북마크는 중간 테이블을 사용해 확장성과 중복 방지를 고려하였다.
- 게시글과 카테고리는 확장 가능성을 고려해 N:M 관계로 설계하였다.
